
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>2025年7月 ガントチャート式シフト表</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="shift_gantt.css" rel="stylesheet">
</head>
<body>
  <h2>2025年7月 ガントチャート式シフト表</h2>
  <div class="control">
    表示日：
    <select id="dateSelect">
      <option value="7/1">7/1</option>
      <option value="7/2">7/2</option>
    </select>
  </div>
  <div class="legend">
    <span class="legend-box" style="background:#007bff"></span> 田中
    <span class="legend-box" style="background:#28a745"></span> 山田
    <span class="legend-box" style="background:#dc3545"></span> 伊藤
    <span class="legend-box" style="background:#ffc107"></span> 中村
    <span class="legend-box" style="background:#17a2b8"></span> 加藤
    <span class="legend-box" style="background:#888"></span> その他（未設定）
  </div>
  <div class="gantt-wrapper">
    <table class="gantt-table">
      <thead>
        <tr>
          <th class="sticky fixed-col">氏名</th>
          <th class="sticky fixed-col-2">開始</th>
          <th class="sticky fixed-col-3">終了</th>
          <!-- 時刻ヘッダを10:00〜26:00（1分ごと） -->
          <th class="time-cell">10:00</th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell">11:00</th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell">12:00</th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell">13:00</th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell">14:00</th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell">15:00</th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell">16:00</th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell">17:00</th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell">18:00</th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell">19:00</th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell">20:00</th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell">21:00</th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell">22:00</th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell">23:00</th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell">24:00</th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell">25:00</th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell">26:00</th><th class="time-cell"></th><th class="time-cell"></th><th class="time-cell"></th>
        </tr>
      </thead>
      <tbody id="gBody"></tbody>
    </table>
  </div>
  <script>
const data = [
  {{ date: "7/1", id: "001", name: "佐藤", start: "10:00", end: "18:00", color: "#888" }},
  {{ date: "7/1", id: "002", name: "田中", start: "13:00", end: "20:00", color: "#007bff" }},
  {{ date: "7/1", id: "003", name: "鈴木", start: "14:00", end: "22:00", color: "#888" }},
  {{ date: "7/1", id: "004", name: "山田", start: "15:00", end: "23:00", color: "#28a745" }},
  {{ date: "7/1", id: "005", name: "伊藤", start: "09:00", end: "17:00", color: "#dc3545" }},
  {{ date: "7/2", id: "001", name: "佐藤", start: "13:00", end: "17:00", color: "#888" }},
  {{ date: "7/2", id: "002", name: "田中", start: "11:00", end: "19:00", color: "#007bff" }},
  {{ date: "7/2", id: "003", name: "鈴木", start: "10:00", end: "14:00", color: "#888" }},
  {{ date: "7/2", id: "004", name: "山田", start: "15:00", end: "22:00", color: "#28a745" }},
  {{ date: "7/2", id: "005", name: "伊藤", start: "10:30", end: "15:30", color: "#dc3545" }},
];
const baseMin = 10 * 60;
function toMin(t) {{ const [h,m]=t.split(":").map(Number); return h*60+m; }}
function render(day) {{
  const tbody = document.getElementById("gBody");
  tbody.innerHTML = "";
  data.filter(r => r.date === day)
      .sort((a,b)=>a.id.localeCompare(b.id)||toMin(a.start)-toMin(b.start))
      .forEach(r => {{
        const tr = document.createElement("tr");
        tr.innerHTML = `<td class="fixed-col">${{r.name}}</td>
                        <td class="fixed-col-2">${{r.start}}</td>
                        <td class="fixed-col-3">${{r.end}}</td>`;
        for (let i = 0; i < (17 * 4); i++) {{
          tr.appendChild(document.createElement("td"));
        }}
        const bar = document.createElement("div");
        bar.className = "row-bar";
        bar.style.left = (toMin(r.start) - baseMin) + "px";
        bar.style.width = (toMin(r.end) - toMin(r.start)) + "px";
        bar.style.background = r.color;
        bar.textContent = r.name;
        bar.title = `${{r.name}}：${{r.start}}〜${{r.end}}`;
        tr.children[3].style.position = "relative";
        tr.children[3].appendChild(bar);
        tbody.appendChild(tr);
      }});
}}
document.getElementById("dateSelect").addEventListener("change", e => render(e.target.value));
render("7/1");
  </script>
</body>
</html>
