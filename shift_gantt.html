
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ガントチャート式シフト表</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="shift_gantt.css" rel="stylesheet">
<style>.time-cell{width:60px;} .row{position:relative;}</style>
</head>
<body>
<h2 style="font-size:1.2rem;">2025年7月 ガントチャート式シフト表</h2>
<div class="mb-2">表示日：<select id="dateSelect" class="form-select d-inline-block w-auto">
<option value="7/1">7/1</option><option value="7/2">7/2</option></select></div>
<div class="mb-2">
<span class="legend-box" style="background:#007bff;"></span> 田中　
<span class="legend-box" style="background:#28a745;"></span> 山田　
<span class="legend-box" style="background:#dc3545;"></span> 伊藤　
<span class="legend-box" style="background:#ffc107;"></span> 中村　
<span class="legend-box" style="background:#17a2b8;"></span> 加藤　
<span class="legend-box" style="background:#888;"></span> その他（未設定）
</div>
<div class="gantt-wrapper">
<table class="gantt-table">
<thead><tr>
<th class="sticky fixed-col">氏名</th><th class="sticky fixed-col-2">開始</th><th class="sticky fixed-col-3">終了</th>
<th class="sticky time-cell" style="width:60px">10:00</th><th class="sticky time-cell" style="width:60px">11:00</th><th class="sticky time-cell" style="width:60px">12:00</th><th class="sticky time-cell" style="width:60px">13:00</th><th class="sticky time-cell" style="width:60px">14:00</th><th class="sticky time-cell" style="width:60px">15:00</th><th class="sticky time-cell" style="width:60px">16:00</th><th class="sticky time-cell" style="width:60px">17:00</th><th class="sticky time-cell" style="width:60px">18:00</th><th class="sticky time-cell" style="width:60px">19:00</th><th class="sticky time-cell" style="width:60px">20:00</th><th class="sticky time-cell" style="width:60px">21:00</th><th class="sticky time-cell" style="width:60px">22:00</th><th class="sticky time-cell" style="width:60px">23:00</th><th class="sticky time-cell" style="width:60px">24:00</th><th class="sticky time-cell" style="width:60px">25:00</th><th class="sticky time-cell" style="width:60px">26:00</th></tr></thead>
<tbody id="gBody"></tbody>
</table></div>
<script>
const data=[{"id": "001", "name": "\u4f50\u85e4", "date": "7/1", "start": "10:00", "end": "18:00", "color": ""}, {"id": "002", "name": "\u7530\u4e2d", "date": "7/1", "start": "13:00", "end": "20:00", "color": "#007bff"}, {"id": "003", "name": "\u9234\u6728", "date": "7/1", "start": "14:00", "end": "22:00", "color": ""}, {"id": "004", "name": "\u5c71\u7530", "date": "7/1", "start": "15:00", "end": "23:00", "color": "#28a745"}, {"id": "006", "name": "\u4f0a\u85e4", "date": "7/1", "start": "09:00", "end": "17:00", "color": "#dc3545"}, {"id": "001", "name": "\u4f50\u85e4", "date": "7/2", "start": "13:00", "end": "17:00", "color": ""}, {"id": "002", "name": "\u7530\u4e2d", "date": "7/2", "start": "11:00", "end": "19:00", "color": "#007bff"}, {"id": "003", "name": "\u9234\u6728", "date": "7/2", "start": "10:00", "end": "14:00", "color": ""}, {"id": "004", "name": "\u5c71\u7530", "date": "7/2", "start": "15:00", "end": "22:00", "color": "#28a745"}, {"id": "005", "name": "\u9ad8\u6a4b", "date": "7/2", "start": "12:00", "end": "18:00", "color": ""}, {"id": "006", "name": "\u4f0a\u85e4", "date": "7/2", "start": "10:30", "end": "15:30", "color": "#dc3545"}, {"id": "007", "name": "\u6e21\u8fba", "date": "7/2", "start": "16:00", "end": "24:00", "color": ""}, {"id": "008", "name": "\u4e2d\u6751", "date": "7/2", "start": "17:00", "end": "26:00", "color": "#ffc107"}, {"id": "009", "name": "\u5c0f\u6797", "date": "7/2", "start": "11:30", "end": "16:00", "color": ""}, {"id": "010", "name": "\u52a0\u85e4", "date": "7/2", "start": "13:00", "end": "20:00", "color": "#17a2b8"}];
const baseMin=10*60;
function toMin(t){const [h,m]=t.split(':').map(Number);return h*60+m;}
function render(d){
 const g=document.getElementById('gBody');g.innerHTML='';
 data.filter(x=>x.date===d).sort((a,b)=>a.id.localeCompare(b.id)||toMin(a.start)-toMin(b.start)).forEach(item=>{
  const tr=document.createElement('tr');tr.className='row';
  tr.innerHTML=`<td class='fixed-col'>${item.name}</td><td class='fixed-col-2'>${item.start}</td><td class='fixed-col-3'>${item.end}</td>`;
  for(let i=0;i<17;i++) tr.appendChild(document.createElement('td'));
  const bar=document.createElement('div');
  bar.className='row-bar';
  bar.style.left=(toMin(item.start)-baseMin)+'px';
  bar.style.width=(toMin(item.end)-toMin(item.start))+'px';
  bar.style.backgroundColor=item.color||'#888';
  bar.textContent=item.name;
  bar.setAttribute('data-tooltip',`${item.name}：${item.start}〜${item.end}`);
  tr.appendChild(bar);
  g.appendChild(tr);
 });
}
document.getElementById('dateSelect').addEventListener('change',e=>render(e.target.value));
render('7/1');
</script>
</body></html>
