
# ガントチャート式シフト表 仕様書（v2）

## 1. 概要
従業員シフトを **15 分単位** でガントチャート表示する Web アプリの要件をまとめる。レスポンシブ対応を前提とし、PC でもスマホでも同一 UI を提供する。

---

## 2. 画面構成

### 2.1 ヘッダ
- **タイトル**: 例) `2025年7月 ガントチャート式シフト表`
- **日付選択**: プルダウン (当月の日付)
- **凡例**: 従業員名 + 担当色

### 2.2 テーブル本体
| 列 | 内容 | 固定 | 初期幅 (PC) |
|----|------|------|-------------|
| 氏名 | 従業員名 | 横スクロールで固定 | 90 px |
| 開始 | 出勤時刻 | 固定 | 70 px |
| 終了 | 退勤時刻 | 固定 | 70 px |
| ガント領域 | **開始〜終了時刻をマスタ設定から動的取得**<br>（最小単位 = 15 分セル） | スクロール | **動的 (flex)** |

---

## 3. グリッド & 目盛り
- **15 分セル**: セル境界を 1 px 細線 `#ccc`
- **1 時間**: 1 時間毎に太線 `2 px #888` (`td.hour-mark`)
- **レスポンシブ**: セル幅は `flex:1` で親幅に追従し、背景に `repeating-linear-gradient` で**セル幅×25%**ごとに線を描画  
  ```css
  .time-cell::before {
    background: repeating-linear-gradient(
      to right,
      transparent 0,
      transparent 25%,
      #ccc 25%,
      #ccc 26%
    );
  }
  ```
- **1 分単位描画は行わない**。開始・終了は *15 分刻み* で登録するルール。

---

## 4. ガントバー表示
- **1 行 = 1 シフト**（同一人物で複数シフトは複数行）
- **色分け**: 従業員マスタのカラー。未設定は `#888`
- バーは `<div class="row-bar">` を「10:00 セル」に絶対配置  
  ```js
  left  = (開始min - baseMin) / 15 * CELL;
  width = (終了min - 開始min) / 15 * CELL;
  ```
- **hover / tap** でツールチップ（氏名・時間）表示

---

## 5. レスポンシブ方針
| 画面幅 | セル幅 | フォント | 補足 |
|--------|--------|---------|------|
| ≥ 768 px (PC) | 60 px (1h = 15 px ×4) | 11 px | フル表示 |
| < 768 px (スマホ) | 40 px (1h = 10 px ×4) | 10 px | テキストが潰れる場合はツールチップ優先 |

- 固定列は `position:sticky; left` を段階指定  
- 時刻ヘッダは `top:0` で固定

---

## 6. ファイル構成
| ファイル | 役割 |
|----------|------|
| `shift_gantt.html` | HTML骨組み・ヘッダ・テーブルプレースホルダ |
| `shift_gantt.css`  | レイアウト & グリッド線・レスポンシブスタイル |
| `shift_gantt.js`   | データロード・表描画・イベントハンドラ |
| **データ** | 将来的にスプレッドシート or DB から取得予定 |

---

## 7. 今後の拡張
1. **編集モード**: ドラッグやダイアログで開始/終了時刻を編集  
2. **外部データ連携**: Google スプレッドシート / DB との同期  
3. **印刷用レイアウト**: A4 横で 1 日 or 1 週間分を出力  

---

## 8. テスト観点
- **ピクセルズレ**: セル幅×25%位置で線が中央に描画されるか
- **固定列挙動**: PC/スマホで左右スクロール時に列が正しく固定されるか
- **色分け**: マスタ色未設定時はデフォルト色 `#888` が適用されるか
- **アクセシビリティ**: バー内テキスト縮小時でもツールチップで情報取得可能か
